import{r,c as b,o as M,t as u,B as c,C as l,D as d,F as g,E as p,G as m,g as R,H as z}from"./index.4270e1da.js";const C={class:"tw-select-none tw-flex tw-justify-center tw-items-center tw-h-[36rem] tw-w-[36rem] tw-relative"},H=["src"],E=["src"],P=["src"],T=["src"],D={__name:"IndexPage",setup(j){const k=R(),n=r([{title:"\u597D\u904B\u9F8D\u4F86",isWin:!1},{title:"\u548C\u6A02\u9F8D\u9F8D",isWin:!1},{title:"\u9F8D\u60C5\u539A\u610F",isWin:!1},{title:"\u9322\u9F8D\u7E3D\u4F86",isWin:!1},{title:"\u9F8D\u610F\u767C\u8CA1",isWin:!1},{title:"\u9F8D\u7E3D\u4E94\u5409",isWin:!1},{title:"\u4F60\u9F8D\u6211\u9F8D",isWin:!1},{title:"\u5929\u5929\u9F8D\u6709\u9322",isWin:!1},{title:"\u9F8D\u5316\u4F60\u7684\u5FC3",isWin:!1},{title:"\u9F8D\u83EF\u5BCC\u8CB4",isWin:!1}]),W=b(()=>`transform: rotate(${180/n.value.length-90}deg)`),x=e=>{const s=e*(360/n.value.length),t=360/n.value.length-90;return`transform: rotate(${s}deg) skew(${t}deg)`},_=e=>`transform: rotate(calc(${36*e}deg + 54deg))`,$=(e,s)=>{let a=`rotate(${-e*360/n.value.length}deg) translateY(-15.5rem)`;return s&&(a+="translateY(7rem)"),{transform:a}},w=r("/MyWeddingRaffle/"),f=r(!1),i=r(0),v=r(!1),o=r(null);M(()=>{o.value=k.refs.wheel});const S=()=>{let e=15,s=Math.floor(Math.random()*360),t=e*360+s;o.value.style.transition="transform 5s ease-out",o.value.style.transform=`rotate(${t}deg)`,setTimeout(()=>{f.value=!0},2500),setTimeout(()=>{i.value=1},3e3),setTimeout(()=>{i.value=2},4500),setTimeout(()=>{v.value=!0},4600),o.value.addEventListener("transitionend",h)},y=r(0),h=()=>{const e=360/n.value.length,s=window.getComputedStyle(o.value),t=new WebKitCSSMatrix(s.transform);let a=Math.atan2(t.m21,t.m11);a=a*(180/Math.PI),a=(a+-18)%360,y.value=Math.floor((360-a)/e)%n.value.length,n.value[y.value].isWin=!0},I=b(()=>n.value.filter(e=>e.isWin)),B=()=>{f.value=!1,i.value=0,v.value=!1,I.value=0,n.value.forEach(e=>e.isWin=!1),o.value.style.transition="none",o.value.style.transform="rotate(0deg)",o.value.removeEventListener("transitionend",h)};return(e,s)=>(u(),c("div",{class:"tw-mx-auto tw-justify-center tw-items-center tw-flex tw-w-[100vw] tw-h-[100vh] tw-relative",style:m({backgroundImage:`url(${w.value}/flowerBg.png)`,backgroundSize:"cover",backgroundPosition:"center center",backgroundRepeat:"no-repeat"})},[l("span",{class:"tw-absolute tw-bottom-0 tw-right-0 tw-block",onClick:s[0]||(s[0]=t=>B())},"Reset"),l("div",C,[l("div",{class:d(["tw-w-[26rem] tw-h-[26rem] tw-absolute tw-transition-all tw-duration-500 tw-ease-linear tw-scale-110",{"tw-top-[-7.5rem] tw-left-[1rem] tw-opacity-100 tw-scale-110":f.value,"tw-top-24 tw-left-0 tw-opacity-50 tw-scale-100":!f.value}])},[l("img",{src:`${w.value}/ameiHead.png`,class:"tw-w-full tw-absolute",alt:"cat"},null,8,H)],2),l("div",{class:d(["tw-w-[7rem] tw-h-[6rem] tw-absolute tw-transition-all tw-duration-500 tw-ease-linear tw-rotate-[-15deg] tw-scale-110",{"tw-top-12 tw-left-[16.5rem] tw-opacity-50":i.value===0,"tw-top-[-7rem] tw-left-[16.5rem] tw-opacity-100":i.value===1,"tw-top-[1rem] tw-left-[15.5rem] tw-opacity-100":i.value===2}])},[l("img",{src:`${w.value}/catHandOne.png`,class:"tw-w-full tw-absolute",alt:"cat"},null,8,E)],2),l("div",{class:d(["tw-w-[7rem] tw-h-[6rem] tw-absolute tw-transition-all tw-duration-500 tw-ease-linear tw-rotate-[10deg] tw-z-10 tw-scale-90 tw-top-[-1rem] tw-left-[17rem]",{"tw-opacity-100":v.value,"tw-opacity-0":!v.value}])},[l("img",{src:`${w.value}/catHandTwo.png`,class:"tw-w-full tw-absolute",alt:"cat"},null,8,P)],2),l("div",{id:"wheel",ref_key:"wheel",ref:o,class:"tw-overflow-hidden tw-rounded-full tw-absolute tw-w-[36rem] tw-h-[36rem] tw-left-0 tw-top-0 tw-flex tw-justify-center tw-items-center tw-border-4 tw-border-rose-200 tw-bg-rose-50 tw-mt-12"},[(u(),c(g,null,p(10,t=>l("div",{key:t,class:"tw-absolute tw-w-[2px] tw-h-[36rem] tw-bg-gray-500 tw-transform",style:m(_(t))},null,4)),64)),l("div",{class:"tw-rounded-full tw-absolute tw-top-0 tw-left-0 tw-w-full tw-h-full",style:m([W.value,{backgroundImage:`url(${w.value}/wheelBG.png)`,backgroundSize:"cover",backgroundPosition:"center center",backgroundRepeat:"no-repeat",opacity:.3}])},[(u(!0),c(g,null,p(n.value,(t,a)=>(u(),c("div",{key:a,style:m(x(a))},null,4))),128))],4),(u(!0),c(g,null,p(n.value,(t,a)=>(u(),c("div",{key:a,class:d(["tw-absolute",{"tw-z-40":t.isWin}]),style:m($(a,t.isWin))},[l("span",{class:d(["tw-font-bold tw-transition-all tw-duration-500",{"tw-text-8xl tw-text-red-600":t.isWin,"tw-text-3xl tw-text-gray-700":!t.isWin}])},z(t.title),3)],6))),128))],512),l("div",{onClick:s[1]||(s[1]=t=>S()),id:"start",class:"tw-absolute tw-cursor-pointer tw-border-gray-400 tw-w-12 tw-z-40 tw-top-[50%]"},[l("img",{src:`${w.value}/arrow.png`,alt:"arrow",class:"tw-w-full tw-h-full"},null,8,T)])])],4))}};export{D as default};
