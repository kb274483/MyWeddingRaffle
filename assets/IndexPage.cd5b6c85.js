import{r as i,c as h,o as z,t as w,B as u,C as l,D as c,F as v,E as g,G as d,g as B,H as C}from"./index.985d6769.js";const M={class:"tw-select-none tw-flex tw-justify-center tw-items-center tw-h-[36rem] tw-w-[36rem] tw-relative"},R=l("img",{src:"public/ameiHead.png",class:"tw-w-full tw-absolute",alt:"cat"},null,-1),H=[R],E=l("img",{src:"public/catHandOne.png",class:"tw-w-full tw-absolute",alt:"cat"},null,-1),P=[E],T=l("img",{src:"public/catHandTwo.png",class:"tw-w-full tw-absolute",alt:"cat"},null,-1),j=[T],L=l("img",{class:"tw-w-full tw-h-full",src:"public/arrow.png",alt:"arrow"},null,-1),A=[L],Y={__name:"IndexPage",setup(D){const y=B(),n=i([{title:"\u597D\u904B\u9F8D\u4F86",isWin:!1},{title:"\u548C\u6A02\u9F8D\u9F8D",isWin:!1},{title:"\u9F8D\u60C5\u539A\u610F",isWin:!1},{title:"\u9322\u9F8D\u7E3D\u4F86",isWin:!1},{title:"\u9F8D\u610F\u767C\u8CA1",isWin:!1},{title:"\u9F8D\u7E3D\u4E94\u5409",isWin:!1},{title:"\u4F60\u9F8D\u6211\u9F8D",isWin:!1},{title:"\u5929\u5929\u9F8D\u6709\u9322",isWin:!1},{title:"\u9F8D\u5316\u4F60\u7684\u5FC3",isWin:!1},{title:"\u9F8D\u83EF\u5BCC\u8CB4",isWin:!1}]),_=h(()=>`transform: rotate(${180/n.value.length-90}deg)`),k=e=>{const s=e*(360/n.value.length),t=360/n.value.length-90;return`transform: rotate(${s}deg) skew(${t}deg)`},W=e=>`transform: rotate(calc(${36*e}deg + 54deg))`,x=(e,s)=>{let a=`rotate(${-e*360/n.value.length}deg) translateY(-15.5rem)`;return s&&(a+="translateY(7rem)"),{transform:a}},m=i(!1),r=i(0),f=i(!1),o=i(null);z(()=>{o.value=y.refs.wheel});const S=()=>{let e=15,s=Math.floor(Math.random()*360),t=e*360+s;o.value.style.transition="transform 5s ease-out",o.value.style.transform=`rotate(${t}deg)`,setTimeout(()=>{m.value=!0},2500),setTimeout(()=>{r.value=1},3e3),setTimeout(()=>{r.value=2},4500),setTimeout(()=>{f.value=!0},4600),o.value.addEventListener("transitionend",b)},p=i(0),b=()=>{const e=360/n.value.length,s=window.getComputedStyle(o.value),t=new WebKitCSSMatrix(s.transform);let a=Math.atan2(t.m21,t.m11);a=a*(180/Math.PI),a=(a+-18)%360,p.value=Math.floor((360-a)/e)%n.value.length,n.value[p.value].isWin=!0},I=h(()=>n.value.filter(e=>e.isWin)),$=()=>{m.value=!1,r.value=0,f.value=!1,I.value=0,n.value.forEach(e=>e.isWin=!1),o.value.style.transition="none",o.value.style.transform="rotate(0deg)",o.value.removeEventListener("transitionend",b)};return(e,s)=>(w(),u("div",{class:"tw-mx-auto tw-justify-center tw-items-center tw-flex tw-w-[100vw] tw-h-[100vh] tw-relative",style:d({backgroundImage:"url(public/flowerBg.png)",backgroundSize:"cover",backgroundPosition:"center center",backgroundRepeat:"no-repeat"})},[l("span",{class:"tw-absolute tw-bottom-0 tw-right-0 tw-block",onClick:s[0]||(s[0]=t=>$())},"Reset"),l("div",M,[l("div",{class:c(["tw-w-[26rem] tw-h-[26rem] tw-absolute tw-transition-all tw-duration-500 tw-ease-linear tw-scale-110",{"tw-top-[-7.5rem] tw-left-[1rem] tw-opacity-100 tw-scale-110":m.value,"tw-top-24 tw-left-0 tw-opacity-50 tw-scale-100":!m.value}])},H,2),l("div",{class:c(["tw-w-[7rem] tw-h-[6rem] tw-absolute tw-transition-all tw-duration-500 tw-ease-linear tw-rotate-[-15deg] tw-scale-110",{"tw-top-12 tw-left-[16.5rem] tw-opacity-50":r.value===0,"tw-top-[-7rem] tw-left-[16.5rem] tw-opacity-100":r.value===1,"tw-top-[1rem] tw-left-[15.5rem] tw-opacity-100":r.value===2}])},P,2),l("div",{class:c(["tw-w-[7rem] tw-h-[6rem] tw-absolute tw-transition-all tw-duration-500 tw-ease-linear tw-rotate-[10deg] tw-z-10 tw-scale-90 tw-top-[-1rem] tw-left-[17rem]",{"tw-opacity-100":f.value,"tw-opacity-0":!f.value}])},j,2),l("div",{id:"wheel",ref_key:"wheel",ref:o,class:"tw-overflow-hidden tw-rounded-full tw-absolute tw-w-[36rem] tw-h-[36rem] tw-left-0 tw-top-0 tw-flex tw-justify-center tw-items-center tw-border-4 tw-border-rose-200 tw-bg-rose-50 tw-mt-12"},[(w(),u(v,null,g(10,t=>l("div",{key:t,class:"tw-absolute tw-w-[2px] tw-h-[36rem] tw-bg-gray-500 tw-transform",style:d(W(t))},null,4)),64)),l("div",{class:"tw-rounded-full tw-absolute tw-top-0 tw-left-0 tw-w-full tw-h-full",style:d([_.value,{backgroundImage:"url(public/wheelBG.png)",backgroundSize:"cover",backgroundPosition:"center center",backgroundRepeat:"no-repeat",opacity:.3}])},[(w(!0),u(v,null,g(n.value,(t,a)=>(w(),u("div",{key:a,style:d(k(a))},null,4))),128))],4),(w(!0),u(v,null,g(n.value,(t,a)=>(w(),u("div",{key:a,class:c(["tw-absolute",{"tw-z-40":t.isWin}]),style:d(x(a,t.isWin))},[l("span",{class:c(["tw-font-bold tw-transition-all tw-duration-500",{"tw-text-8xl tw-text-red-600":t.isWin,"tw-text-3xl tw-text-gray-700":!t.isWin}])},C(t.title),3)],6))),128))],512),l("div",{onClick:s[1]||(s[1]=t=>S()),id:"start",class:"tw-absolute tw-cursor-pointer tw-border-gray-400 tw-w-12 tw-z-40 tw-top-[50%]"},A)])],4))}};export{Y as default};
