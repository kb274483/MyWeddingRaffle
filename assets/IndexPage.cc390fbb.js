import{r as o,c as k,o as M,t as u,B as c,C as s,D as d,F as p,E as y,G as m,g as R,H as C}from"./index.ade3c93e.js";const P={class:"tw-select-none tw-flex tw-justify-center tw-items-center tw-h-[36rem] tw-w-[36rem] tw-relative"},H=["src"],E=["src"],j=["src"],L=["src"],G={__name:"IndexPage",setup(A){const W=R(),n=o([{title:"\u597D\u904B\u9F8D\u4F86",isWin:!1},{title:"\u548C\u6A02\u9F8D\u9F8D",isWin:!1},{title:"\u9F8D\u60C5\u539A\u610F",isWin:!1},{title:"\u9322\u9F8D\u7E3D\u4F86",isWin:!1},{title:"\u9F8D\u610F\u767C\u8CA1",isWin:!1},{title:"\u9F8D\u7E3D\u4E94\u5409",isWin:!1},{title:"\u4F60\u9F8D\u6211\u9F8D",isWin:!1},{title:"\u5929\u5929\u9F8D\u6709\u9322",isWin:!1},{title:"\u9F8D\u5316\u4F60\u7684\u5FC3",isWin:!1},{title:"\u9F8D\u83EF\u5BCC\u8CB4",isWin:!1}]),x=k(()=>`transform: rotate(${180/n.value.length-90}deg)`),_=e=>{const a=e*(360/n.value.length),t=360/n.value.length-90;return`transform: rotate(${a}deg) skew(${t}deg)`},$=e=>`transform: rotate(calc(${36*e}deg + 54deg))`,S=(e,a)=>{let l=`rotate(${-e*360/n.value.length}deg) translateY(-10.5rem)`;return a&&(l+="translateY(2rem)"),{transform:l}},i=o("/MyWeddingRaffle/"),f=o(!1),w=o(0),v=o(!1),r=o(null);M(()=>{r.value=W.refs.wheel});const g=e=>new Promise(a=>setTimeout(a,e)),I=async()=>{let e=15,a=Math.floor(Math.random()*360),t=e*360+a;r.value.style.transition="transform 5s ease-out",r.value.style.transform=`rotate(${t}deg)`,await g(2500),f.value=!0,await g(500),w.value=1,await g(1500),w.value=2,await g(100),v.value=!0,await new Promise(l=>r.value.addEventListener("transitionend",b))},h=o(0),b=()=>{const e=360/n.value.length,a=window.getComputedStyle(r.value),t=new WebKitCSSMatrix(a.transform);let l=Math.atan2(t.m21,t.m11);l=l*(180/Math.PI),l=(l+-18)%360,h.value=Math.floor((360-l)/e)%n.value.length,n.value[h.value].isWin=!0},z=k(()=>n.value.filter(e=>e.isWin)),B=()=>{f.value=!1,w.value=0,v.value=!1,z.value=0,n.value.forEach(e=>e.isWin=!1),r.value.style.transition="none",r.value.style.transform="rotate(0deg)",r.value.removeEventListener("transitionend",b)};return(e,a)=>(u(),c("div",{class:"tw-mx-auto tw-justify-center tw-items-center tw-flex tw-w-[100vw] tw-h-[100vh] tw-relative",style:m({backgroundImage:`url(${i.value}/flowerBg.png)`,backgroundSize:"cover",backgroundPosition:"center center",backgroundRepeat:"no-repeat"})},[s("span",{class:"tw-absolute tw-bottom-0 tw-right-0 tw-block",onClick:a[0]||(a[0]=t=>B())},"Reset"),s("div",P,[s("div",{class:d(["tw-w-[26rem] tw-h-[26rem] tw-absolute tw-transition-all tw-duration-500 tw-ease-linear tw-scale-110",{"tw-top-[-7.5rem] tw-left-[1rem] tw-opacity-100 tw-scale-110":f.value,"tw-top-24 tw-left-0 tw-opacity-50 tw-scale-100":!f.value}])},[s("img",{src:`${i.value}/ameiHead.png`,class:"tw-w-full tw-absolute",alt:"cat"},null,8,H)],2),s("div",{class:d(["tw-w-[7rem] tw-h-[6rem] tw-absolute tw-transition-all tw-duration-500 tw-ease-linear tw-rotate-[-15deg] tw-scale-110",{"tw-top-12 tw-left-[16.5rem] tw-opacity-50":w.value===0,"tw-top-[-7rem] tw-left-[16.5rem] tw-opacity-100":w.value===1,"tw-top-[1rem] tw-left-[15.5rem] tw-opacity-100":w.value===2}])},[s("img",{src:`${i.value}/catHandOne.png`,class:"tw-w-full tw-absolute",alt:"cat"},null,8,E)],2),s("div",{class:d(["tw-w-[7rem] tw-h-[6rem] tw-absolute tw-transition-all tw-duration-500 tw-ease-linear tw-rotate-[10deg] tw-z-10 tw-scale-90 tw-top-[-1rem] tw-left-[17rem]",{"tw-opacity-100":v.value,"tw-opacity-0":!v.value}])},[s("img",{src:`${i.value}/catHandTwo.png`,class:"tw-w-full tw-absolute",alt:"cat"},null,8,j)],2),s("div",{id:"wheel",ref_key:"wheel",ref:r,class:"tw-overflow-hidden tw-rounded-full tw-absolute tw-w-[36rem] tw-h-[36rem] tw-left-0 tw-top-0 tw-flex tw-justify-center tw-items-center tw-border-4 tw-border-rose-200 tw-bg-rose-50 tw-mt-12"},[(u(),c(p,null,y(10,t=>s("div",{key:t,class:"tw-absolute tw-w-[2px] tw-h-[36rem] tw-bg-gray-500 tw-transform",style:m($(t))},null,4)),64)),s("div",{class:"tw-rounded-full tw-absolute tw-top-0 tw-left-0 tw-w-full tw-h-full",style:m([x.value,{backgroundImage:`url(${i.value}/wheelBG.png)`,backgroundSize:"cover",backgroundPosition:"center center",backgroundRepeat:"no-repeat",opacity:.3}])},[(u(!0),c(p,null,y(n.value,(t,l)=>(u(),c("div",{key:l,style:m(_(l))},null,4))),128))],4),(u(!0),c(p,null,y(n.value,(t,l)=>(u(),c("div",{key:l,class:d(["tw-absolute",{"tw-z-40":t.isWin}]),style:m([S(l,t.isWin),t.isWin?"writing-mode: horizontal-tb;":"writing-mode: vertical-rl;"])},[s("span",{class:d(["tw-font-bold tw-transition-all tw-duration-500",{"tw-text-[6.5rem] tw-text-red-600":t.isWin,"tw-text-5xl tw-text-gray-700":!t.isWin}])},C(t.title),3)],6))),128))],512),s("div",{onClick:a[1]||(a[1]=t=>I()),id:"start",class:"tw-absolute tw-cursor-pointer tw-border-gray-400 tw-w-12 tw-z-40 tw-top-[50%]"},[s("img",{src:`${i.value}/arrow.png`,alt:"arrow",class:"tw-w-full tw-h-full"},null,8,L)])])],4))}};export{G as default};
