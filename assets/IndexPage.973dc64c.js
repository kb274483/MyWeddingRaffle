import{r,c as k,o as R,t as w,B as u,C as s,D as d,F as p,E as y,G as m,g as C,H as P}from"./index.2f4fbad8.js";const H={class:"tw-select-none tw-flex tw-justify-center tw-items-center tw-h-[36rem] tw-w-[36rem] tw-relative"},E=["src"],j=["src"],A=["src"],F={__name:"IndexPage",setup(L){const W=C(),n=r([{title:"\u597D\u904B\u9F8D\u4F86",isWin:!1},{title:"\u548C\u6A02\u9F8D\u9F8D",isWin:!1},{title:"\u9F8D\u60C5\u539A\u610F",isWin:!1},{title:"\u9322\u9F8D\u7E3D\u4F86",isWin:!1},{title:"\u9F8D\u610F\u767C\u8CA1",isWin:!1},{title:"\u9F8D\u7E3D\u4E94\u5409",isWin:!1},{title:"\u4F60\u9F8D\u6211\u9F8D",isWin:!1},{title:"\u5929\u5929\u9F8D\u6709\u9322",isWin:!1},{title:"\u9F8D\u5316\u4F60\u7684\u5FC3",isWin:!1},{title:"\u9F8D\u83EF\u5BCC\u8CB4",isWin:!1}]),x=k(()=>`transform: rotate(${180/n.value.length-90}deg)`),_=e=>{const l=e*(360/n.value.length),t=360/n.value.length-90;return`transform: rotate(${l}deg) skew(${t}deg)`},$=e=>`transform: rotate(calc(${36*e}deg + 54deg))`,S=(e,l)=>{let a=`rotate(${-e*360/n.value.length}deg) translateY(-10.5rem)`;return l&&(a+="translateY(2rem)"),{transform:a}},c=r("/MyWeddingRaffle/"),v=r(!1),i=r(0),f=r(!1),o=r(null);R(()=>{o.value=W.refs.wheel});const g=e=>new Promise(l=>setTimeout(l,e)),I=async()=>{let e=15,l=360/10,t=36+Math.floor(Math.random()*10)*l,a=e*360+t;o.value.style.transition="transform 5s ease-out",o.value.style.transform=`rotate(${a}deg)`,await g(2500),v.value=!0,await g(500),i.value=1,await g(1500),i.value=2,await g(100),f.value=!0,await new Promise(M=>o.value.addEventListener("transitionend",h))},b=r(0),h=()=>{const e=360/n.value.length,l=window.getComputedStyle(o.value),t=new WebKitCSSMatrix(l.transform);let a=Math.atan2(t.m21,t.m11);a=a*(180/Math.PI),a=(a+-18)%360,b.value=Math.floor((360-a)/e)%n.value.length,n.value[b.value].isWin=!0},z=k(()=>n.value.filter(e=>e.isWin)),B=()=>{v.value=!1,i.value=0,f.value=!1,z.value=0,n.value.forEach(e=>e.isWin=!1),o.value.style.transition="none",o.value.style.transform="rotate(0deg)",o.value.removeEventListener("transitionend",h)};return(e,l)=>(w(),u("div",{class:"tw-mx-auto tw-justify-center tw-items-center tw-flex tw-w-[100vw] tw-h-[100vh] tw-relative",style:m({backgroundImage:`url(${c.value}/flowerBg.png)`,backgroundSize:"cover",backgroundPosition:"center center",backgroundRepeat:"no-repeat"})},[s("span",{class:"tw-absolute tw-bottom-0 tw-right-0 tw-block",onClick:l[0]||(l[0]=t=>B())},"Reset"),s("div",H,[s("div",{class:d(["tw-w-[26rem] tw-h-[26rem] tw-absolute tw-transition-all tw-duration-500 tw-ease-linear tw-scale-110",{"tw-top-[-7.5rem] tw-left-[1rem] tw-opacity-100 tw-scale-110":v.value,"tw-top-24 tw-left-0 tw-opacity-50 tw-scale-100":!v.value}])},[s("img",{src:`${c.value}/ameiHead.png`,class:"tw-w-full tw-absolute",alt:"cat"},null,8,E)],2),s("div",{class:d(["tw-w-[7rem] tw-h-[6rem] tw-absolute tw-transition-all tw-duration-500 tw-ease-linear tw-rotate-[-15deg] tw-scale-110",{"tw-top-12 tw-left-[16.5rem] tw-opacity-50":i.value===0,"tw-top-[-7rem] tw-left-[16.5rem] tw-opacity-100":i.value===1,"tw-top-[1rem] tw-left-[15.5rem] tw-opacity-100":i.value===2}])},[s("img",{src:`${c.value}/catHandOne.png`,class:"tw-w-full tw-absolute",alt:"cat"},null,8,j)],2),s("div",{class:d(["tw-w-[7rem] tw-h-[6rem] tw-absolute tw-transition-all tw-duration-500 tw-ease-linear tw-rotate-[10deg] tw-z-10 tw-scale-90 tw-top-[-1rem] tw-left-[17rem]",{"tw-opacity-100":f.value,"tw-opacity-0":!f.value}])},[s("img",{src:`${c.value}/catHandTwo.png`,class:"tw-w-full tw-absolute",alt:"cat"},null,8,A)],2),s("div",{id:"wheel",ref_key:"wheel",ref:o,class:"tw-overflow-hidden tw-rounded-full tw-absolute tw-w-[36rem] tw-h-[36rem] tw-left-0 tw-top-0 tw-flex tw-justify-center tw-items-center tw-border-4 tw-border-rose-200 tw-bg-rose-50 tw-mt-12"},[(w(),u(p,null,y(10,t=>s("div",{key:t,class:"tw-absolute tw-w-[2px] tw-h-[36rem] tw-bg-gray-500 tw-transform",style:m($(t))},null,4)),64)),s("div",{class:"tw-rounded-full tw-absolute tw-top-0 tw-left-0 tw-w-full tw-h-full",style:m([x.value,{backgroundImage:`url(${c.value}/wheelBG.png)`,backgroundSize:"cover",backgroundPosition:"center center",backgroundRepeat:"no-repeat",opacity:.3}])},[(w(!0),u(p,null,y(n.value,(t,a)=>(w(),u("div",{key:a,style:m(_(a))},null,4))),128))],4),(w(!0),u(p,null,y(n.value,(t,a)=>(w(),u("div",{key:a,class:d(["tw-absolute",{"tw-z-40":t.isWin}]),style:m([S(a,t.isWin),t.isWin?"writing-mode: horizontal-tb;":"writing-mode: vertical-rl;"])},[s("span",{class:d(["tw-font-bold tw-transition-all tw-duration-500",{"tw-text-[6.5rem] tw-text-red-600":t.isWin,"tw-text-5xl tw-text-gray-700":!t.isWin}])},P(t.title),3)],6))),128))],512),s("div",{onClick:l[1]||(l[1]=t=>I()),id:"start",class:"tw-absolute tw-cursor-pointer tw-border-gray-400 tw-w-16 tw-h-16 tw-z-40 tw-top-[53%]"})])],4))}};export{F as default};
